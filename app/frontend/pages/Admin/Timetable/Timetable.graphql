fragment TimetableActivity on Activity {
  id
  type
  name
  slug
}

fragment TimetableSlot on Slot {
  id
  startsAt
  endsAt
  activityType

  activity {
    ...TimetableActivity
  }

  venue {
    id
    room
    building
    position
  }
}

query Timetable($year: String) {
  festival(year: $year) {
    id
    startDate
    endDate

    timetable {
      id

      slots {
        ...TimetableSlot
      }
    }

    venues {
      id
      room
      building
      position
    }
  }
}

mutation CreateSlots($attributes: MultipleSlotAttributes!) {
  createSlots(attributes: $attributes) {
    slots {
      ...TimetableSlot
    }
  }
}

mutation DestroySlot($id: ID!) {
  destroySlot(id: $id)
}

mutation UpdateSlot($id: ID!, $attributes: SlotAttributes!) {
  updateSlot(id: $id, attributes: $attributes) {
    slot {
      ...TimetableSlot
    }
  }
}
