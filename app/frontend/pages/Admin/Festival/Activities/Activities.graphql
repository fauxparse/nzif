query ActivityList($type: ActivityType) {
  festival {
    id

    activities(type: $type) {
      ...ActivityListActivity
    }
  }
}

fragment SessionParticipant on Registration {
  id
  user {
    id
    profile {
      id
      name
    }
  }
}

fragment AdminActivitySessionDetails on Session {
  id
  startsAt
  endsAt
  capacity

  participants {
    ...SessionParticipant
  }

  waitlist {
    ...SessionParticipant
  }

  venue {
    id
    room
    building
  }
}

fragment AdminActivityDetails on Activity {
  id
  name
  type
  slug
  description
  missingInfo

  picture {
    id
    medium
    large
  }

  ... on Show {
    bookingLink

    workshop {
      id
      name
      slug
      type

      sessions {
        id
        startsAt
      }
    }
  }

  ... on Workshop {
    suitability

    show {
      id
      name
      slug
      type

      sessions {
        id
        startsAt
      }
    }
  }

  presenters {
    ...ActivityPresenter
    bio
    pronouns
    picture {
      large
    }
    user {
      id
      email
      permissions
    }
  }

  sessions {
    ...AdminActivitySessionDetails
  }
}

query ActivityDetails($type: ActivityType!, $slug: String!) {
  festival {
    id

    activity(type: $type, slug: $slug) {
      ...AdminActivityDetails
    }

    venues {
      id
      room
      building
    }
  }
}

fragment ActivityListActivity on Activity {
  id
  name
  type
  slug
  missingInfo

  sessions {
    id
    startsAt
    endsAt

    venue {
      id
      room
      building
    }
  }

  presenters {
    ...ActivityPresenter
  }
}

fragment ActivityPresenter on Person {
  id
  name

  city {
    id
    name
    traditionalName
  }

  country {
    id
    name
    traditionalName
  }

  picture {
    id
    small
  }
}

mutation RenameActivity($id: ID!, $name: String!) {
  renameActivity(id: $id, name: $name) {
    activity {
      id
      name
      type
      slug
    }
  }
}

mutation MoveActivity($id: ID!, $slug: String!) {
  moveActivity(id: $id, slug: $slug) {
    activity {
      id
      name
      type
      slug
    }
  }
}

mutation UpdateActivity($id: ID!, $attributes: ActivityAttributes!) {
  updateActivity(id: $id, attributes: $attributes) {
    activity {
      ...AdminActivityDetails
    }
  }
}

mutation UpdateSessionVenue($id: ID!, $venueId: ID!) {
  updateSession(id: $id, attributes: { venueId: $venueId }) {
    session {
      id

      venue {
        id
        room
        building
      }
    }
  }
}

mutation UpdateSessionCapacity($id: ID!, $capacity: Int!) {
  updateSession(id: $id, attributes: { capacity: $capacity }) {
    session {
      id
      capacity
    }
  }
}
