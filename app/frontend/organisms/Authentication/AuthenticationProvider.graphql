fragment AuthenticatedUser on User {
  id

  profile {
    id
    name

    picture {
      small
    }
  }
}

query CurrentUser {
  user {
    ...AuthenticatedUser
  }
}

mutation LogIn($email: String!, $password: String!) {
  userLogin(email: $email, password: $password) {
    user: authenticatable {
      ...AuthenticatedUser
    }

    credentials {
      accessToken
      client
      uid
    }
  }
}

mutation LogOut {
  userLogout {
    user: authenticatable {
      id
    }
  }
}

mutation SignUp($name: String!, $email: String!, $password: String!) {
  userRegister(name: $name, email: $email, password: $password, passwordConfirmation: $password) {
    user: authenticatable {
      ...AuthenticatedUser
    }

    credentials {
      accessToken
      client
      uid
    }
  }
}

mutation ResetPassword($email: String!) {
  userSendPasswordResetWithToken(email: $email, redirectUrl: "http://example.com") {
    message
  }
}
