"""
An activity that may be scheduled during the Festival
"""
interface Activity {
  """
  Unique ID
  """
  id: ID!

  """
  Activity name
  """
  name: String!

  """
  For use in URL generation
  """
  slug: String!

  """
  Type of activity
  """
  type: ActivityType!
}

"""
A search result from an activity
"""
type ActivityResult implements SearchResult {
  """
  Activity
  """
  activity: Activity!

  """
  Supporting description
  """
  description: String

  """
  Unique ID
  """
  id: ID!

  """
  Title of result page
  """
  title: String!

  """
  Link to result page
  """
  url: String!
}

"""
The state of a festival
"""
enum ActivityType {
  """
  Show
  """
  Show

  """
  Workshop
  """
  Workshop
}

"""
A boolean user preference
"""
type BooleanPreference implements Preference {
  """
  Preference description
  """
  description: String!

  """
  Preference ID
  """
  id: String!

  """
  Preference value
  """
  value: Boolean!
}

"""
Autogenerated return type of CreateMultipleSlots.
"""
type CreateMultipleSlotsPayload {
  """
  The newly created slots
  """
  slots: [Slot!]!
}

"""
Autogenerated return type of CreateSlot.
"""
type CreateSlotPayload {
  """
  The newly created slot
  """
  slot: Slot!
}

type Credential {
  accessToken: String!
  client: String!
  expiry: Int!
  tokenType: String!
  uid: String!
}

"""
A festival
"""
type Festival {
  """
  Activities (including unscheduled ones)
  """
  activities(
    """
    Activity type
    """
    type: ActivityType
  ): [Activity!]!

  """
  Retrieve an activity by its type and slug
  """
  activity(
    """
    URL segment
    """
    slug: String!

    """
    Activity type
    """
    type: ActivityType!
  ): Activity

  """
  The last day of the festival
  """
  endDate: ISODate!

  """
  Year of the festival
  """
  id: ID!

  """
  The first day of the festival
  """
  startDate: ISODate!

  """
  State of the festival
  """
  state: FestivalState!

  """
  The timetable for the festival
  """
  timetable: Timetable!

  """
  Venues
  """
  venues: [Venue!]!
}

"""
The state of a festival
"""
enum FestivalState {
  """
  In the past
  """
  Finished

  """
  Happening right now
  """
  Happening

  """
  In the future
  """
  Upcoming
}

"""
An ISO 8601-encoded datetime
"""
scalar ISO8601DateTime

"""
A date in ISO8601 format
"""
scalar ISODate

"""
Attributes for adding or updating an activity slot
"""
input MultipleSlotAttributes {
  """
  The type of activity
  """
  activityType: ActivityType!

  """
  The ID of the festival to which the slots belong
  """
  festivalId: ID!

  """
  Time slots
  """
  timeRanges: [TimeRangeAttributes!]!

  """
  The ID(s) of the venue(s)
  """
  venueIds: [ID!]!
}

"""
Top-level mutation interface
"""
type Mutation {
  """
  Create an activity slot
  """
  createSlot(
    """
    The attributes for the slot
    """
    attributes: SlotAttributes!

    """
    The ID of the festival to which the slot belongs
    """
    festivalId: ID!
  ): CreateSlotPayload

  """
  Create multiple activity slots at once
  """
  createSlots(
    """
    The attributes for the slots
    """
    attributes: MultipleSlotAttributes!
  ): CreateMultipleSlotsPayload

  """
  Removes a slot from the timetable
  """
  destroySlot(
    """
    Slot ID
    """
    id: ID!
  ): Boolean

  """
  Updates a user’s preference
  """
  updatePreference(
    """
    The ID of the preference to update
    """
    id: String!

    """
    The new value for the preference as a boolean
    """
    value: PreferenceValue!
  ): UpdatePreferencePayload

  """
  Update an activity slot
  """
  updateSlot(
    """
    The attributes for the slot
    """
    attributes: SlotAttributes!

    """
    The ID of the slot to update
    """
    id: ID!
  ): UpdateSlotPayload

  """
  Update a user
  """
  updateUser(
    """
    Attributes to update
    """
    attributes: UserAttributes!

    """
    The ID of the user to update
    """
    id: ID
  ): UpdateUserPayload
  userConfirmRegistrationWithToken(confirmationToken: String!): UserConfirmRegistrationWithTokenPayload
  userLogin(email: String!, password: String!): UserLoginPayload
  userLogout: UserLogoutPayload
  userRegister(confirmUrl: String, email: String!, name: String!, password: String!, passwordConfirmation: String!): UserRegisterPayload
  userResendConfirmationWithToken(confirmUrl: String!, email: String!): UserResendConfirmationWithTokenPayload
  userSendPasswordResetWithToken(email: String!, redirectUrl: String!): UserSendPasswordResetWithTokenPayload
  userUpdatePasswordWithToken(password: String!, passwordConfirmation: String!, resetPasswordToken: String!): UserUpdatePasswordWithTokenPayload
}

"""
A search result from a content page
"""
type PageResult implements SearchResult {
  """
  Supporting description
  """
  description: String

  """
  Unique ID
  """
  id: ID!

  """
  Lede of the page
  """
  lede: String

  """
  Slug of the page
  """
  slug: String!

  """
  Title of the page
  """
  title: String!

  """
  Link to result page
  """
  url: String!
}

"""
A user preference
"""
interface Preference {
  """
  Preference description
  """
  description: String!

  """
  Preference ID
  """
  id: String!
}

"""
Value for a user preference
"""
input PreferenceValue {
  """
  The new value for the preference as a boolean
  """
  boolean: Boolean

  """
  The new value for the preference as a string
  """
  string: String
}

type Query {
  """
  Find a festival by year
  """
  festival(
    """
    The year of the festival
    """
    year: String
  ): Festival!

  """
  User preference (if set)
  """
  preference(
    """
    The ID of the preference to retrieve
    """
    id: String!
  ): Preference

  """
  Search for content
  """
  search(
    """
    Maximum number of results to return
    """
    limit: Int

    """
    Text to search for
    """
    query: String!
  ): [SearchResult!]!

  """
  Current user
  """
  user(
    """
    The ID of the user to retrieve (defaults to current user)
    """
    id: ID
  ): User
}

"""
User authorization roles
"""
enum Role {
  """
  Admin
  """
  Admin

  """
  Participant liaison
  """
  ParticipantLiaison
}

"""
An individual search result
"""
interface SearchResult {
  """
  Supporting description
  """
  description: String

  """
  Unique ID
  """
  id: ID!

  """
  Title of result page
  """
  title: String!

  """
  Link to result page
  """
  url: String!
}

"""
A show
"""
type Show implements Activity {
  """
  Unique ID
  """
  id: ID!

  """
  Activity name
  """
  name: String!

  """
  For use in URL generation
  """
  slug: String!

  """
  Type of activity
  """
  type: ActivityType!
}

"""
A slot in the Festival schedule
"""
type Slot {
  """
  The type of activity that will take place during this slot
  """
  activityType: ActivityType!

  """
  The time at which the slot ends
  """
  endsAt: ISO8601DateTime!

  """
  The ID of the slot
  """
  id: ID!

  """
  The time at which the slot starts
  """
  startsAt: ISO8601DateTime!

  """
  The venue where the slot will take place
  """
  venue: Venue
}

"""
Attributes for adding or updating an activity slot
"""
input SlotAttributes {
  """
  The type of activity
  """
  activityType: ActivityType

  """
  The time at which the slot ends
  """
  endsAt: ISO8601DateTime

  """
  The time at which the slot starts
  """
  startsAt: ISO8601DateTime

  """
  The ID of the venue
  """
  venueId: ID
}

"""
A string user preference
"""
type StringPreference implements Preference {
  """
  Preference description
  """
  description: String!

  """
  Preference ID
  """
  id: String!

  """
  Preference value
  """
  value: String!
}

"""
A start and end time
"""
input TimeRangeAttributes {
  """
  The time at which the slot ends
  """
  endsAt: ISO8601DateTime!

  """
  The time at which the slot starts
  """
  startsAt: ISO8601DateTime!
}

"""
A timetable for a Festival
"""
type Timetable {
  """
  The ID of the timetable
  """
  id: ID!

  """
  The slots in the timetable
  """
  slots: [Slot!]!
}

"""
Autogenerated return type of UpdatePreference.
"""
type UpdatePreferencePayload {
  """
  The updated preference
  """
  preference: Preference!
}

"""
Autogenerated return type of UpdateSlot.
"""
type UpdateSlotPayload {
  """
  The updated slot
  """
  slot: Slot!
}

"""
Autogenerated return type of UpdateUser.
"""
type UpdateUserPayload {
  """
  The updated user
  """
  user: User!
}

"""
A user
"""
type User {
  """
  Email address
  """
  email: String!

  """
  Unique ID
  """
  id: ID!

  """
  Name
  """
  name: String!

  """
  Authorized roles
  """
  roles: [Role!]!
}

"""
Attributes for updating a user
"""
input UserAttributes {
  """
  The new email address for the user
  """
  email: String

  """
  The new name for the user
  """
  name: String

  """
  The user’s roles
  """
  roles: [Role!]
}

"""
Autogenerated return type of UserConfirmRegistrationWithToken.
"""
type UserConfirmRegistrationWithTokenPayload {
  authenticatable: User!

  """
  Authentication credentials. Null unless user is signed in after confirmation.
  """
  credentials: Credential
}

"""
Autogenerated return type of UserLogin.
"""
type UserLoginPayload {
  authenticatable: User!
  credentials: Credential!
}

"""
Autogenerated return type of UserLogout.
"""
type UserLogoutPayload {
  authenticatable: User!
}

"""
Autogenerated return type of UserRegister.
"""
type UserRegisterPayload {
  authenticatable: User!

  """
  Authentication credentials. Null if after signUp resource is not active for
  authentication (e.g. Email confirmation required).
  """
  credentials: Credential
}

"""
Autogenerated return type of UserResendConfirmationWithToken.
"""
type UserResendConfirmationWithTokenPayload {
  message: String!
}

"""
A search result from a user
"""
type UserResult implements SearchResult {
  """
  Supporting description
  """
  description: String

  """
  Unique ID
  """
  id: ID!

  """
  Title of result page
  """
  title: String!

  """
  Link to result page
  """
  url: String!

  """
  User
  """
  user: User!
}

"""
Autogenerated return type of UserSendPasswordResetWithToken.
"""
type UserSendPasswordResetWithTokenPayload {
  message: String!
}

"""
Autogenerated return type of UserUpdatePasswordWithToken.
"""
type UserUpdatePasswordWithTokenPayload {
  authenticatable: User!

  """
  Authentication credentials. Resource must be signed_in for credentials to be returned.
  """
  credentials: Credential
}

"""
A venue
"""
type Venue {
  """
  Address
  """
  address: String!

  """
  Building
  """
  building: String!

  """
  Unique ID
  """
  id: ID!

  """
  Latitude
  """
  latitude: Float!

  """
  Longitude
  """
  longitude: Float!

  """
  Sort position
  """
  position: Int!

  """
  Room
  """
  room: String
}

"""
A search result from a venue
"""
type VenueResult implements SearchResult {
  """
  Supporting description
  """
  description: String

  """
  Unique ID
  """
  id: ID!

  """
  Title of result page
  """
  title: String!

  """
  Link to result page
  """
  url: String!

  """
  Venue
  """
  venue: Venue!
}

"""
A workshop
"""
type Workshop implements Activity {
  """
  Unique ID
  """
  id: ID!

  """
  Activity name
  """
  name: String!

  """
  For use in URL generation
  """
  slug: String!

  """
  Type of activity
  """
  type: ActivityType!
}
